"use strict";(self.webpackChunk_lynkit_docs=self.webpackChunk_lynkit_docs||[]).push([["384"],{4190:function(e,n,t){t.r(n),t.d(n,{default:()=>p});var r=t(4732),s=t(6603),d=t(4977);function i(e){let[n,t]=(0,d.useState)(e),r=(0,d.useRef)(null),s=(0,d.useCallback)((e,n)=>{t(n=>{let t="function"==typeof e?e(n):e;return{...n,...t}}),n&&(r.current=n)},[]);return(0,d.useEffect)(()=>{r.current&&(r.current(),r.current=null)}),[n,s]}let a=()=>{let[e,n]=i({name:"LynKit",count:0});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{style:{marginBottom:"12px",color:"#666"},children:["名称: ",(0,r.jsx)("strong",{children:e.name})," | 计数: ",(0,r.jsx)("strong",{children:e.count})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,r.jsx)("button",{onClick:()=>n({count:e.count+1}),style:{padding:"8px 16px",background:"#646cff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"计数 +1"}),(0,r.jsx)("button",{onClick:()=>n({name:"Updated!"}),style:{padding:"8px 16px",background:"#42b883",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"更新名称"}),(0,r.jsx)("button",{onClick:()=>n({name:"LynKit",count:0}),style:{padding:"8px 16px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer"},children:"重置"})]})]})},l=()=>{let[e,n]=i({username:"",email:"",age:18});return(0,r.jsxs)("div",{style:{maxWidth:"300px"},children:[(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",color:"#666"},children:"用户名"}),(0,r.jsx)("input",{value:e.username,onChange:e=>n({username:e.target.value}),placeholder:"请输入用户名",style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",color:"#666"},children:"邮箱"}),(0,r.jsx)("input",{value:e.email,onChange:e=>n({email:e.target.value}),placeholder:"请输入邮箱",style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsxs)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",color:"#666"},children:["年龄: ",e.age]}),(0,r.jsx)("input",{type:"range",min:"1",max:"100",value:e.age,onChange:e=>n({age:Number(e.target.value)}),style:{width:"100%"}})]}),(0,r.jsx)("pre",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"6px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(e,null,2)})]})},o=()=>{let[e,n]=i({count:0,history:[]});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{style:{marginBottom:"12px",color:"#666"},children:["当前值: ",(0,r.jsx)("strong",{children:e.count})]}),(0,r.jsxs)("p",{style:{marginBottom:"12px",color:"#666",fontSize:"14px"},children:["历史记录: ",e.history.join(" → ")||"(空)"]}),(0,r.jsx)("button",{onClick:()=>{n(e=>({count:e.count+1,history:[...e.history,e.count+1]}))},style:{padding:"8px 16px",background:"#646cff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"增加并记录"})]})};var c=t(963);function h(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",ul:"ul",li:"li",pre:"pre",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"usesetstate",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#usesetstate",children:"#"}),"useSetState"]}),"\n",(0,r.jsxs)(n.p,{children:["模拟类组件的 ",(0,r.jsx)(n.code,{children:"setState"})," 方法，支持对象合并更新。"]}),"\n",(0,r.jsxs)(n.h2,{id:"使用场景",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用场景",children:"#"}),"使用场景"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"管理复杂对象状态"}),"\n",(0,r.jsx)(n.li,{children:"从类组件迁移到函数组件"}),"\n",(0,r.jsx)(n.li,{children:"需要部分更新对象状态"}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"安装",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"}),"安装"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install @lynkit/hooks\n# 或\npnpm add @lynkit/hooks\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"代码演示",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#代码演示",children:"#"}),"代码演示"]}),"\n",(0,r.jsxs)(n.h3,{id:"基础用法",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#基础用法",children:"#"}),"基础用法"]}),"\n",(0,r.jsx)(n.p,{children:"管理对象状态，支持部分更新。"}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_hooks_use_set_state_1",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",meta:"preview",children:"import { useSetState } from '@lynkit/hooks';\n\nexport default () => {\n  const [state, setState] = useSetState({\n    name: 'LynKit',\n    count: 0,\n  });\n  \n  return (\n    <div>\n      <p style={{ marginBottom: '12px', color: '#666' }}>\n        名称: <strong>{state.name}</strong> | 计数: <strong>{state.count}</strong>\n      </p>\n      <div style={{ display: 'flex', gap: '8px' }}>\n        <button \n          onClick={() => setState({ count: state.count + 1 })}\n          style={{\n            padding: '8px 16px',\n            background: '#646cff',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer'\n          }}\n        >\n          计数 +1\n        </button>\n        <button \n          onClick={() => setState({ name: 'Updated!' })}\n          style={{\n            padding: '8px 16px',\n            background: '#42b883',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer'\n          }}\n        >\n          更新名称\n        </button>\n        <button \n          onClick={() => setState({ name: 'LynKit', count: 0 })}\n          style={{\n            padding: '8px 16px',\n            background: '#f5f5f5',\n            color: '#333',\n            border: '1px solid #ddd',\n            borderRadius: '6px',\n            cursor: 'pointer'\n          }}\n        >\n          重置\n        </button>\n      </div>\n    </div>\n  );\n};\n"})}),(0,r.jsx)(a,{})]}),"\n",(0,r.jsxs)(n.h3,{id:"表单状态管理",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#表单状态管理",children:"#"}),"表单状态管理"]}),"\n",(0,r.jsx)(n.p,{children:"适用于表单场景的状态管理。"}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_hooks_use_set_state_2",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",meta:"preview",children:"import { useSetState } from '@lynkit/hooks';\n\nexport default () => {\n  const [form, setForm] = useSetState({\n    username: '',\n    email: '',\n    age: 18,\n  });\n  \n  return (\n    <div style={{ maxWidth: '300px' }}>\n      <div style={{ marginBottom: '12px' }}>\n        <label style={{ display: 'block', marginBottom: '4px', fontSize: '14px', color: '#666' }}>\n          用户名\n        </label>\n        <input\n          value={form.username}\n          onChange={(e) => setForm({ username: e.target.value })}\n          placeholder=\"请输入用户名\"\n          style={{\n            width: '100%',\n            padding: '8px 12px',\n            border: '1px solid #ddd',\n            borderRadius: '6px',\n            fontSize: '14px'\n          }}\n        />\n      </div>\n      <div style={{ marginBottom: '12px' }}>\n        <label style={{ display: 'block', marginBottom: '4px', fontSize: '14px', color: '#666' }}>\n          邮箱\n        </label>\n        <input\n          value={form.email}\n          onChange={(e) => setForm({ email: e.target.value })}\n          placeholder=\"请输入邮箱\"\n          style={{\n            width: '100%',\n            padding: '8px 12px',\n            border: '1px solid #ddd',\n            borderRadius: '6px',\n            fontSize: '14px'\n          }}\n        />\n      </div>\n      <div style={{ marginBottom: '16px' }}>\n        <label style={{ display: 'block', marginBottom: '4px', fontSize: '14px', color: '#666' }}>\n          年龄: {form.age}\n        </label>\n        <input\n          type=\"range\"\n          min=\"1\"\n          max=\"100\"\n          value={form.age}\n          onChange={(e) => setForm({ age: Number(e.target.value) })}\n          style={{ width: '100%' }}\n        />\n      </div>\n      <pre style={{ \n        background: '#f5f5f5', \n        padding: '12px', \n        borderRadius: '6px',\n        fontSize: '12px',\n        overflow: 'auto'\n      }}>\n        {JSON.stringify(form, null, 2)}\n      </pre>\n    </div>\n  );\n};\n"})}),(0,r.jsx)(l,{})]}),"\n",(0,r.jsxs)(n.h3,{id:"函数式更新",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#函数式更新",children:"#"}),"函数式更新"]}),"\n",(0,r.jsx)(n.p,{children:"支持传入函数进行更新。"}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_hooks_use_set_state_3",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",meta:"preview",children:"import { useSetState } from '@lynkit/hooks';\n\nexport default () => {\n  const [state, setState] = useSetState({\n    count: 0,\n    history: [] as number[],\n  });\n  \n  const increment = () => {\n    setState(prev => ({\n      count: prev.count + 1,\n      history: [...prev.history, prev.count + 1],\n    }));\n  };\n  \n  return (\n    <div>\n      <p style={{ marginBottom: '12px', color: '#666' }}>\n        当前值: <strong>{state.count}</strong>\n      </p>\n      <p style={{ marginBottom: '12px', color: '#666', fontSize: '14px' }}>\n        历史记录: {state.history.join(' → ') || '(空)'}\n      </p>\n      <button \n        onClick={increment}\n        style={{\n          padding: '8px 16px',\n          background: '#646cff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '6px',\n          cursor: 'pointer'\n        }}\n      >\n        增加并记录\n      </button>\n    </div>\n  );\n};\n"})}),(0,r.jsx)(o,{})]}),"\n",(0,r.jsxs)(n.h2,{id:"api",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#api",children:"#"}),"API"]}),"\n",(0,r.jsxs)(n.h3,{id:"类型签名",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#类型签名",children:"#"}),"类型签名"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function useSetState<T extends object>(\n  initialState: T | (() => T)\n): [T, (patch: Partial<T> | ((prevState: T) => Partial<T>)) => void]\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"参数",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"}),"参数"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"参数"}),(0,r.jsx)(n.th,{children:"说明"}),(0,r.jsx)(n.th,{children:"类型"}),(0,r.jsx)(n.th,{children:"必填"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"initialState"}),(0,r.jsx)(n.td,{children:"初始状态"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"T | (() => T)"})}),(0,r.jsx)(n.td,{children:"✓"})]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"返回值",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#返回值",children:"#"}),"返回值"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"返回值"}),(0,r.jsx)(n.th,{children:"说明"}),(0,r.jsx)(n.th,{children:"类型"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"state"}),(0,r.jsx)(n.td,{children:"当前状态"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"T"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"setState"}),(0,r.jsx)(n.td,{children:"更新状态函数"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(patch: Partial<T> | ((prev: T) => Partial<T>)) => void"})})]})]})]}),"\n",(0,r.jsxs)(n.h2,{id:"与-usestate-的区别",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#与-usestate-的区别",children:"#"}),"与 useState 的区别"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"特性"}),(0,r.jsx)(n.th,{children:"useSetState"}),(0,r.jsx)(n.th,{children:"useState"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"更新方式"}),(0,r.jsx)(n.td,{children:"合并更新"}),(0,r.jsx)(n.td,{children:"替换更新"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"适用类型"}),(0,r.jsx)(n.td,{children:"对象状态"}),(0,r.jsx)(n.td,{children:"任意类型"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"部分更新"}),(0,r.jsx)(n.td,{children:"✅ 支持"}),(0,r.jsx)(n.td,{children:"❌ 需手动展开"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// useSetState - 自动合并\nsetState({ name: 'new' }); // { name: 'new', count: 0 }\n\n// useState - 需要手动合并\nsetState(prev => ({ ...prev, name: 'new' }));\n"})})]})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(h,e)})):h(e)}let p=x;x.__RSPRESS_PAGE_META={},x.__RSPRESS_PAGE_META["hooks%2Fuse-set-state.mdx"]={toc:[{id:"使用场景",text:"使用场景",depth:2},{id:"安装",text:"安装",depth:2},{id:"代码演示",text:"代码演示",depth:2},{id:"基础用法",text:"基础用法",depth:3},{id:"表单状态管理",text:"表单状态管理",depth:3},{id:"函数式更新",text:"函数式更新",depth:3},{id:"api",text:"API",depth:2},{id:"类型签名",text:"类型签名",depth:3},{id:"参数",text:"参数",depth:3},{id:"返回值",text:"返回值",depth:3},{id:"与-usestate-的区别",text:"与 useState 的区别",depth:2}],title:"useSetState",headingTitle:"useSetState",frontmatter:{title:"useSetState",description:"模拟类组件的 setState 方法，支持对象合并更新"}}}}]);