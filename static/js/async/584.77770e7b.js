"use strict";(self.webpackChunk_lynkit_docs=self.webpackChunk_lynkit_docs||[]).push([["584"],{497:function(e,n,t){t.r(n),t.d(n,{default:()=>u});var d=t(4732),r=t(6603);function s(e,n){let t,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{leading:r=!1,trailing:s=!0}=d,l=null,i=null,c=null,a=0;function h(n){let t=i,d=c;i=null,c=null,a=n,t&&e.apply(d,t)}function o(e,n){l=setTimeout(e,n)}function u(e){let d=e-(t??0),r=e-a;return void 0===t||d>=n||d<0||r>=n}function x(e){l=null,s&&i?h(e):(i=null,c=null)}function j(){let e=Date.now();u(e)?x(e):o(j,n-(e-(t??0)))}function p(){for(var e=arguments.length,d=Array(e),s=0;s<e;s++)d[s]=arguments[s];let x=Date.now(),p=u(x);if(i=d,c=this,t=x,p&&null===l)return void(a=x,o(j,n),r&&h(x));null===l&&o(j,n)}return p.cancel=function(){l&&(clearTimeout(l),l=null),a=0,i=null,c=null,t=void 0},p.flush=function(){null!==l&&x(Date.now())},p}var l=t(4977);let i=()=>{let[e,n]=(0,l.useState)(0),[t,r]=(0,l.useState)(0),i=(0,l.useCallback)(s(()=>{r(e=>e+1)},500),[]);return(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{onClick:()=>{n(e=>e+1),i()},style:{padding:"8px 16px",background:"#646cff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginBottom:"16px"},children:"点击我"}),(0,d.jsxs)("p",{style:{margin:"8px 0",color:"#666"},children:["普通点击次数：",e]}),(0,d.jsxs)("p",{style:{margin:"8px 0",color:"#666"},children:["防抖执行次数：",t]}),(0,d.jsx)("p",{style:{fontSize:"12px",color:"#999"},children:"快速点击后，防抖函数会在停止点击 500ms 后执行"})]})},c=()=>{let[e,n]=(0,l.useState)(""),[t,r]=(0,l.useState)([]),[i,c]=(0,l.useState)(!1),a=(0,l.useCallback)(s(e=>{if(!e)return void r([]);c(!0),setTimeout(()=>{r([`\u{641C}\u{7D22}\u{7ED3}\u{679C} 1: ${e}`,`\u{641C}\u{7D22}\u{7ED3}\u{679C} 2: ${e}`,`\u{641C}\u{7D22}\u{7ED3}\u{679C} 3: ${e}`]),c(!1)},300)},500),[]);return(0,d.jsxs)("div",{style:{maxWidth:"300px"},children:[(0,d.jsx)("input",{value:e,onChange:e=>{let t=e.target.value;n(t),a(t)},placeholder:"输入搜索内容...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}}),i&&(0,d.jsx)("p",{style:{color:"#999",margin:"12px 0"},children:"搜索中..."}),t.length>0&&(0,d.jsx)("ul",{style:{margin:"12px 0",paddingLeft:"20px"},children:t.map((e,n)=>(0,d.jsx)("li",{style:{color:"#666",padding:"4px 0"},children:e},n))})]})};var a=t(963);function h(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),e.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.h1,{id:"debounce-防抖",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debounce-防抖",children:"#"}),"debounce 防抖"]}),"\n",(0,d.jsx)(n.p,{children:"防抖函数，用于限制函数的执行频率。在事件被触发 n 毫秒后再执行回调，如果在这 n 毫秒内又被触发，则重新计时。"}),"\n",(0,d.jsxs)(n.h2,{id:"使用场景",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用场景",children:"#"}),"使用场景"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"搜索框输入"}),"：用户停止输入后再发起搜索请求"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"窗口调整"}),"：窗口大小变化停止后再计算布局"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"按钮提交"}),"：防止用户多次点击提交"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"滚动加载"}),"：滚动停止后再加载数据"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"安装",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"}),"安装"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"npm install @lynkit/api\n# 或\npnpm add @lynkit/api\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"代码演示",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#代码演示",children:"#"}),"代码演示"]}),"\n",(0,d.jsxs)(n.h3,{id:"基础用法",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#基础用法",children:"#"}),"基础用法"]}),"\n",(0,d.jsx)(n.p,{children:"最简单的防抖使用方式。"}),"\n",(0,d.jsxs)(a.Z,{isMobile:"false",demoId:"_api_debounce_1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",meta:"preview",children:"import { debounce } from '@lynkit/api';\nimport { useState, useCallback } from 'react';\n\nexport default () => {\n  const [count, setCount] = useState(0);\n  const [debounceCount, setDebounceCount] = useState(0);\n\n  const handleDebounce = useCallback(\n    debounce(() => {\n      setDebounceCount(c => c + 1);\n    }, 500),\n    []\n  );\n\n  const handleClick = () => {\n    setCount(c => c + 1);\n    handleDebounce();\n  };\n\n  return (\n    <div>\n      <button\n        onClick={handleClick}\n        style={{\n          padding: '8px 16px',\n          background: '#646cff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '6px',\n          cursor: 'pointer',\n          marginBottom: '16px'\n        }}\n      >\n        点击我\n      </button>\n      <p style={{ margin: '8px 0', color: '#666' }}>普通点击次数：{count}</p>\n      <p style={{ margin: '8px 0', color: '#666' }}>防抖执行次数：{debounceCount}</p>\n      <p style={{ fontSize: '12px', color: '#999' }}>快速点击后，防抖函数会在停止点击 500ms 后执行</p>\n    </div>\n  );\n};\n"})}),(0,d.jsx)(i,{})]}),"\n",(0,d.jsxs)(n.h3,{id:"搜索场景",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#搜索场景",children:"#"}),"搜索场景"]}),"\n",(0,d.jsx)(n.p,{children:"典型的搜索防抖应用。"}),"\n",(0,d.jsxs)(a.Z,{isMobile:"false",demoId:"_api_debounce_2",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",meta:"preview",children:"import { debounce } from '@lynkit/api';\nimport { useState, useCallback } from 'react';\n\nexport default () => {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const search = useCallback(\n    debounce((value: string) => {\n      if (!value) {\n        setResults([]);\n        return;\n      }\n      setLoading(true);\n      // 模拟 API 请求\n      setTimeout(() => {\n        setResults([\n          `搜索结果 1: ${value}`,\n          `搜索结果 2: ${value}`,\n          `搜索结果 3: ${value}`,\n        ]);\n        setLoading(false);\n      }, 300);\n    }, 500),\n    []\n  );\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setQuery(value);\n    search(value);\n  };\n\n  return (\n    <div style={{ maxWidth: '300px' }}>\n      <input\n        value={query}\n        onChange={handleChange}\n        placeholder=\"输入搜索内容...\"\n        style={{\n          width: '100%',\n          padding: '8px 12px',\n          border: '1px solid #ddd',\n          borderRadius: '6px',\n          fontSize: '14px'\n        }}\n      />\n      {loading && <p style={{ color: '#999', margin: '12px 0' }}>搜索中...</p>}\n      {results.length > 0 && (\n        <ul style={{ margin: '12px 0', paddingLeft: '20px' }}>\n          {results.map((r, i) => (\n            <li key={i} style={{ color: '#666', padding: '4px 0' }}>{r}</li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n"})}),(0,d.jsx)(c,{})]}),"\n",(0,d.jsxs)(n.h2,{id:"api",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#api",children:"#"}),"API"]}),"\n",(0,d.jsxs)(n.h3,{id:"类型签名",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#类型签名",children:"#"}),"类型签名"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"function debounce<T extends (...args: any[]) => any>(\n  fn: T,\n  wait: number,\n  immediate?: boolean\n): T & { cancel: () => void }\n"})}),"\n",(0,d.jsxs)(n.h3,{id:"参数",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"}),"参数"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"参数"}),(0,d.jsx)(n.th,{children:"说明"}),(0,d.jsx)(n.th,{children:"类型"}),(0,d.jsx)(n.th,{children:"默认值"}),(0,d.jsx)(n.th,{children:"必填"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"fn"}),(0,d.jsx)(n.td,{children:"需要防抖的函数"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Function"})}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:"✓"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"wait"}),(0,d.jsx)(n.td,{children:"等待时间（毫秒）"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"number"})}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:"✓"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"immediate"}),(0,d.jsx)(n.td,{children:"是否在触发时立即执行"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"boolean"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,d.jsxs)(n.h3,{id:"返回值",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#返回值",children:"#"}),"返回值"]}),"\n",(0,d.jsx)(n.p,{children:"返回一个防抖后的函数，该函数具有以下额外方法："}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"方法"}),(0,d.jsx)(n.th,{children:"说明"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cancel()"})}),(0,d.jsx)(n.td,{children:"取消防抖，清除定时器"})]})})]}),"\n",(0,d.jsxs)(n.h2,{id:"与-throttle-的区别",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#与-throttle-的区别",children:"#"}),"与 throttle 的区别"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"特性"}),(0,d.jsx)(n.th,{children:"debounce 防抖"}),(0,d.jsx)(n.th,{children:"throttle 节流"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"执行时机"}),(0,d.jsx)(n.td,{children:"最后一次触发后"}),(0,d.jsx)(n.td,{children:"固定间隔执行"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"适用场景"}),(0,d.jsx)(n.td,{children:"搜索、验证"}),(0,d.jsx)(n.td,{children:"滚动、resize"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"执行次数"}),(0,d.jsx)(n.td,{children:"连续触发只执行一次"}),(0,d.jsx)(n.td,{children:"固定频率执行"})]})]})]}),"\n",(0,d.jsxs)(n.h2,{id:"最佳实践",children:[(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#最佳实践",children:"#"}),"最佳实践"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"// ✅ 推荐：在组件外部或使用 useCallback 创建\nconst debouncedSearch = debounce(search, 300);\n\n// ❌ 不推荐：在渲染函数中创建\nfunction Component() {\n  // 每次渲染都会创建新的防抖函数\n  const debouncedSearch = debounce(search, 300);\n}\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,d.jsx)(n,Object.assign({},e,{children:(0,d.jsx)(h,e)})):h(e)}let u=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["api%2Fdebounce.mdx"]={toc:[{id:"使用场景",text:"使用场景",depth:2},{id:"安装",text:"安装",depth:2},{id:"代码演示",text:"代码演示",depth:2},{id:"基础用法",text:"基础用法",depth:3},{id:"搜索场景",text:"搜索场景",depth:3},{id:"api",text:"API",depth:2},{id:"类型签名",text:"类型签名",depth:3},{id:"参数",text:"参数",depth:3},{id:"返回值",text:"返回值",depth:3},{id:"与-throttle-的区别",text:"与 throttle 的区别",depth:2},{id:"最佳实践",text:"最佳实践",depth:2}],title:"debounce 防抖",headingTitle:"debounce 防抖",frontmatter:{title:"debounce 防抖",description:"限制函数执行频率的工具函数"}}}}]);