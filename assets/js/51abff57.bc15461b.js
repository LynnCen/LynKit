"use strict";(self.webpackChunk_lynkit_docs=self.webpackChunk_lynkit_docs||[]).push([[240],{6039:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>r});var l=t(8225);const s={},i=l.createContext(s);function o(n){const e=l.useContext(i);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),l.createElement(i.Provider,{value:e},n.children)}},8476:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"hooks/useInterval","title":"useInterval","description":"\u7b80\u4ecb","source":"@site/docs/hooks/useInterval.md","sourceDirName":"hooks","slug":"/hooks/useInterval","permalink":"/docs/hooks/useInterval","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/lynkit/edit/main/docs/docs/hooks/useInterval.md","tags":[],"version":"current","lastUpdatedBy":"caizhongling","lastUpdatedAt":1744362130000,"sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"hooks","previous":{"title":"useIsFirstRender","permalink":"/docs/hooks/useIsFirstRender"},"next":{"title":"usePollingAI","permalink":"/docs/hooks/usePollingAI"}}');var s=t(7557),i=t(6039);const o={sidebar_position:7},r="useInterval",d={},a=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",level:2},{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",level:2},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:3},{value:"\u53ef\u63a7\u7684\u5b9a\u65f6\u5668",id:"\u53ef\u63a7\u7684\u5b9a\u65f6\u5668",level:3},{value:"\u8f6e\u8be2 API \u6570\u636e",id:"\u8f6e\u8be2-api-\u6570\u636e",level:3},{value:"API \u5c5e\u6027",id:"api-\u5c5e\u6027",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c",level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"useinterval",children:"useInterval"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"useInterval"})," \u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook\uff0c\u7528\u4e8e\u5728 React \u7ec4\u4ef6\u4e2d\u5b89\u5168\u5730\u8bbe\u7f6e\u548c\u7ba1\u7406\u5b9a\u65f6\u5668\u3002\u5b83\u63d0\u4f9b\u4e86\u5bf9 ",(0,s.jsx)(e.code,{children:"setInterval"})," \u7684\u5c01\u88c5\uff0c\u89e3\u51b3\u4e86\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u5b9a\u65f6\u5668\u7684\u5e38\u89c1\u95ee\u9898\uff0c\u5982\u5185\u5b58\u6cc4\u6f0f\u548c\u95ed\u5305\u9677\u9631\u3002\u8be5 Hook \u8fd8\u652f\u6301\u52a8\u6001\u8c03\u6574\u95f4\u9694\u65f6\u95f4\u548c\u6682\u505c/\u6062\u590d\u5b9a\u65f6\u5668\u7684\u529f\u80fd\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"\u4f7f\u7528\u573a\u666f",children:"\u4f7f\u7528\u573a\u666f"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u5b9a\u671f\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u5982\u8f6e\u8be2 API"}),"\n",(0,s.jsx)(e.li,{children:"\u521b\u5efa\u5012\u8ba1\u65f6\u6216\u8ba1\u65f6\u5668"}),"\n",(0,s.jsx)(e.li,{children:"\u5b9e\u73b0\u81ea\u52a8\u6eda\u52a8\u6216\u8f6e\u64ad\u6548\u679c"}),"\n",(0,s.jsx)(e.li,{children:"\u5b9a\u671f\u66f4\u65b0\u663e\u793a\u7684\u6570\u636e"}),"\n",(0,s.jsx)(e.li,{children:"\u52a8\u753b\u548c\u6e38\u620f\u5faa\u73af"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u80fd\u6682\u505c\u548c\u6062\u590d\u7684\u5468\u671f\u6027\u4efb\u52a1"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u4f7f\u7528\u793a\u4f8b",children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"import { useState } from 'react';\nimport { useInterval } from '@lynkit/hooks';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  \n  // \u6bcf\u79d2\u589e\u52a0\u8ba1\u6570\n  useInterval(() => {\n    setCount(count + 1);\n  }, 1000);\n  \n  return <div>Count: {count}</div>;\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u53ef\u63a7\u7684\u5b9a\u65f6\u5668",children:"\u53ef\u63a7\u7684\u5b9a\u65f6\u5668"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"import { useState } from 'react';\nimport { useInterval } from '@lynkit/hooks';\n\nfunction ControlledTimer() {\n  const [count, setCount] = useState(0);\n  const [delay, setDelay] = useState(1000);\n  const [isRunning, setIsRunning] = useState(true);\n  \n  // \u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e delay \u4e3a null \u6765\u6682\u505c\u5b9a\u65f6\u5668\n  useInterval(() => {\n    setCount(count + 1);\n  }, isRunning ? delay : null);\n  \n  const handleDelayChange = (e) => {\n    setDelay(Number(e.target.value));\n  };\n  \n  const toggleTimer = () => {\n    setIsRunning(!isRunning);\n  };\n  \n  return (\n    <div>\n      <p>Count: {count}</p>\n      <div>\n        <label>\n          Delay (ms):\n          <input \n            type=\"number\" \n            value={delay} \n            onChange={handleDelayChange} \n            min=\"10\"\n            step=\"100\"\n          />\n        </label>\n      </div>\n      <button onClick={toggleTimer}>\n        {isRunning ? 'Pause' : 'Resume'}\n      </button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u8f6e\u8be2-api-\u6570\u636e",children:"\u8f6e\u8be2 API \u6570\u636e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"import { useState } from 'react';\nimport { useInterval } from '@lynkit/hooks';\n\nfunction DataPolling() {\n  const [data, setData] = useState(null);\n  const [isPolling, setIsPolling] = useState(true);\n  const [pollInterval, setPollInterval] = useState(5000);\n  const [lastUpdated, setLastUpdated] = useState(null);\n  \n  // \u5b9a\u65f6\u83b7\u53d6\u6700\u65b0\u6570\u636e\n  useInterval(() => {\n    console.log('Fetching data...');\n    fetchData().then(newData => {\n      setData(newData);\n      setLastUpdated(new Date().toLocaleTimeString());\n    });\n  }, isPolling ? pollInterval : null);\n  \n  const fetchData = async () => {\n    // \u6a21\u62df API \u8bf7\u6c42\n    const response = await fetch('/api/data');\n    return response.json();\n  };\n  \n  const togglePolling = () => {\n    setIsPolling(!isPolling);\n  };\n  \n  const changePollInterval = (e) => {\n    setPollInterval(Number(e.target.value) * 1000);\n  };\n  \n  return (\n    <div>\n      <h2>Data Polling Example</h2>\n      \n      <div>\n        {data ? (\n          <div>\n            <pre>{JSON.stringify(data, null, 2)}</pre>\n            <p>Last updated: {lastUpdated}</p>\n          </div>\n        ) : (\n          <p>Loading data...</p>\n        )}\n      </div>\n      \n      <div>\n        <label>\n          Poll every:\n          <select value={pollInterval / 1000} onChange={changePollInterval}>\n            <option value=\"1\">1 second</option>\n            <option value=\"5\">5 seconds</option>\n            <option value=\"10\">10 seconds</option>\n            <option value=\"30\">30 seconds</option>\n          </select>\n        </label>\n      </div>\n      \n      <button onClick={togglePolling}>\n        {isPolling ? 'Stop Polling' : 'Start Polling'}\n      </button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"api-\u5c5e\u6027",children:"API \u5c5e\u6027"}),"\n",(0,s.jsx)(e.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"useInterval(callback, delay);\n"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u53c2\u6570"}),(0,s.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(e.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"callback"})}),(0,s.jsx)(e.td,{children:"Function"}),(0,s.jsx)(e.td,{children:"\u5fc5\u586b"}),(0,s.jsx)(e.td,{children:"\u8981\u5b9a\u671f\u6267\u884c\u7684\u51fd\u6570"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"delay"})}),(0,s.jsx)(e.td,{children:"number | null"}),(0,s.jsx)(e.td,{children:"\u5fc5\u586b"}),(0,s.jsx)(e.td,{children:"\u6267\u884c\u95f4\u9694\uff08\u6beb\u79d2\uff09\uff0c\u8bbe\u7f6e\u4e3a null \u65f6\u6682\u505c\u5b9a\u65f6\u5668"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"\u8fd4\u56de\u503c",children:"\u8fd4\u56de\u503c"}),"\n",(0,s.jsx)(e.p,{children:"useInterval \u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u95ed\u5305\u95ee\u9898"}),"\uff1a",(0,s.jsx)(e.code,{children:"useInterval"})," \u5185\u90e8\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"useRef"})," \u6765\u5b58\u50a8\u6700\u65b0\u7684\u56de\u8c03\u51fd\u6570\uff0c\u4ece\u800c\u89e3\u51b3 React \u51fd\u6570\u7ec4\u4ef6\u4e2d\u7684\u95ed\u5305\u95ee\u9898\uff0c\u786e\u4fdd\u5b9a\u65f6\u5668\u59cb\u7ec8\u4f7f\u7528\u6700\u65b0\u7684 props \u548c state\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u7ec4\u4ef6\u5378\u8f7d\u65f6\u6e05\u7406"}),"\uff1aHook \u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u65f6\u81ea\u52a8\u6e05\u9664\u5b9a\u65f6\u5668\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u52a8\u6001\u8c03\u6574\u95f4\u9694"}),"\uff1a\u53ef\u4ee5\u52a8\u6001\u66f4\u6539 ",(0,s.jsx)(e.code,{children:"delay"})," \u53c2\u6570\uff0c\u5b9a\u65f6\u5668\u4f1a\u81ea\u52a8\u4f7f\u7528\u65b0\u7684\u95f4\u9694\u65f6\u95f4\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6682\u505c/\u6062\u590d\u529f\u80fd"}),"\uff1a\u901a\u8fc7\u5c06 ",(0,s.jsx)(e.code,{children:"delay"})," \u8bbe\u7f6e\u4e3a ",(0,s.jsx)(e.code,{children:"null"})," \u53ef\u4ee5\u6682\u505c\u5b9a\u65f6\u5668\uff0c\u8bbe\u7f6e\u56de\u6570\u503c\u53ef\u4ee5\u6062\u590d\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6027\u80fd\u8003\u8651"}),"\uff1a\u907f\u514d\u8bbe\u7f6e\u8fc7\u77ed\u7684\u95f4\u9694\u65f6\u95f4\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002\u5bf9\u4e8e\u9700\u8981\u9ad8\u7cbe\u5ea6\u5b9a\u65f6\u7684\u60c5\u51b5\uff0c\u8003\u8651\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"requestAnimationFrame"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u6e32\u67d3"}),"\uff1a",(0,s.jsx)(e.code,{children:"useInterval"})," \u4e0d\u4f1a\u5bfc\u81f4\u989d\u5916\u7684\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u9664\u975e\u56de\u8c03\u51fd\u6570\u4e2d\u66f4\u65b0\u4e86\u72b6\u6001\u3002"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}}}]);